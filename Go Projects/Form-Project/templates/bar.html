<link rel="stylesheet" type="text/css" href="/static/css/bar.css">
<!-- header.html -->
<div class="navbar">
    <!-- Ãœst bar iÃ§eriÄŸi buraya gelecek -->
    <div id="bigbar">
        <div id="dÃ¼zenbar">
            <div id="bar">
                <!-- Logo -->
                <a href="index.html" id="logo"
                    style="background-image: url('/static/png/logo.png'); background-repeat: no-repeat; background-size: contain; width: 120px; height: 120px;"></a>

                <input type="text" id="searchBox" placeholder="Arama YapÄ±nÄ±z" onkeyup="searchPosts()">
                <div id="darkmod">
                    <!-- Tema deÄŸiÅŸtirme dÃ¼ÄŸmesi -->
                    <span class="theme-mode">
                        <a role="button" id="themeToggle" title="Tema DeÄŸiÅŸtir" href="javascript:void(0);">ðŸŒ“
                        </a>
                    </span>
                </div>
                <div id="giriÅŸbar">
                    <nav>
                        <!-- GiriÅŸ durumuna gÃ¶re menÃ¼ -->
                        {{if .LoggedIn}}
                        <div id="myprofil">
                            <a href="/myprofil"><img width="80%" height="100%" src="/static/png/pp.png"></a>
                        </div>
                        <a href="/logout" id="logoutButton" class="button">Log Out</a>
                        <!-- HoÅŸ geldiniz popup'Ä± -->
                        <script>
                            // EÄŸer popup daha Ã¶nce gÃ¶sterilmemiÅŸse gÃ¶ster
                            if (!localStorage.getItem('popupGosterildi')) {
                                const welcomePopup = document.createElement('div');
                                welcomePopup.innerHTML = `
                                        <div id="welcomePopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 15%;  display: flex; justify-content: center; align-items: center; z-index: 9999;">
                                            <div id="popup" style="background-color: white; padding: 10px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); color: black;">
                                                <h4>HoÅŸ geldiniz!</h4>
                                                <p>Sitemize giriÅŸ yaptÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.</p>
                                            </div>
                                        </div>
                                    `;
                                document.body.appendChild(welcomePopup);

                                // Tema moduna gÃ¶re popup rengini ayarla
                                const popupElement = welcomePopup.querySelector('#popup');
                                const theme = localStorage.getItem("tema") ||
                                    "light"; // EÄŸer tema daha Ã¶nce kaydedilmiÅŸse kullan, yoksa "light"
                                if (theme === "dark") {
                                    popupElement.style.backgroundColor = "rgb(239, 242, 246)";
                                    popupElement.style.color = "black";
                                } else {
                                    popupElement.style.backgroundColor = "rgb(20, 25, 31)";
                                    popupElement.style.color = "white";
                                }

                                // Pop-up'Ä± kapatmak iÃ§in bir zamanlayÄ±cÄ± kullan
                                setTimeout(() => {
                                    welcomePopup.remove(); // Pop-up'Ä± kapat
                                }, 1500);

                                // Popup'Ä±n gÃ¶sterildiÄŸini iÅŸaretle
                                localStorage.setItem('popupGosterildi', 'true');
                            }

                            // Ã‡Ä±kÄ±ÅŸ yap butonuna tÄ±klandÄ±ÄŸÄ±nda onay popup'Ä± gÃ¶ster ve localStorage'Ä± temizle
                            document.querySelector('#logoutButton').addEventListener('click', function (event) {
                                event
                                    .preventDefault(); // BaÄŸlantÄ±nÄ±n varsayÄ±lan davranÄ±ÅŸÄ±nÄ± engelle (sayfayÄ± yenileme)

                                // Onay popup'Ä±nÄ± gÃ¶ster
                                if (confirm('Are you sure you want to log out?')) {
                                    // localStorage'Ä± temizle
                                    localStorage.removeItem('popupGosterildi');

                                    // KullanÄ±cÄ± evet derse, logout sayfasÄ±na git
                                    window.location.href = this.getAttribute('href');
                                }
                            });
                        </script>

                        {{else}}
                        <a href="/login" class="button">Log In</a>
                        <a href="/register" class="button">Register</a>
                        {{end}}
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>