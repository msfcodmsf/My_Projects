<!DOCTYPE html>
<html lang="tr">
<head>
    <title>Software News</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
    <!-- Ãœst Ã§ubuk -->
    <div id="bigbar">
        <div id="dÃ¼zenbar">
            <div id="bar">
                <img id="logo" src="/static/png/logo.png">
                <input type="text" id="searchBox" placeholder="Arama YapÄ±nÄ±z" onkeyup="searchLanguages()">
                <div id="darkmod">
                    <!-- Tema deÄŸiÅŸtirme dÃ¼ÄŸmesi -->
                    <span class="theme-mode">
                        <a role="button" id="themeToggle" title="Tema DeÄŸiÅŸtir" href="javascript:void(0);">ğŸŒ“
                          <i id="themeIcon" class="fas fa-sun"></i></a> 
                    </span>
                </div>
                <div id="giriÅŸbar">
                    <nav>
                        <!-- GiriÅŸ durumuna gÃ¶re menÃ¼ -->
                        {{if .LoggedIn}}
                        <div id="myprofil">
                            <a href="/myprofil"><img width="80%" height="100%" src="/static/png/pp.png"></a>
                        </div>
                            <a href="/logout" class="button">Log Out</a>
                             <!-- HoÅŸ geldiniz popup'Ä± -->
                            <script>
                                const welcomePopup = document.createElement('div');
                                welcomePopup.innerHTML = `
                                    <div id="welcomePopup" style="position: fixed; top: 0; left: 0; width: 100%; height: 15%;  display: flex; justify-content: center; align-items: center; z-index: 9999;">
                                        <div id="popup" style="background-color: white; padding: 10px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); color: black;">
                                            <h4>HoÅŸ geldiniz!</h4>
                                            <p>Sitemize giriÅŸ yaptÄ±ÄŸÄ±nÄ±z iÃ§in teÅŸekkÃ¼r ederiz.</p>
                                        </div>
                                    </div>
                                `;
                                document.body.appendChild(welcomePopup);
                                
                                // Tema moduna gÃ¶re popup rengini ayarla
                                const popupElement = welcomePopup.querySelector('#popup');
                                const theme = localStorage.getItem("tema") || "light"; // EÄŸer tema daha Ã¶nce kaydedilmiÅŸse kullan, yoksa "light"
                                if (theme === "dark") {
                                    popupElement.style.backgroundColor = "rgb(239, 242, 246)";
                                    popupElement.style.color = "black";
                                } else {
                                    popupElement.style.backgroundColor = "rgb(20, 25, 31)";
                                    popupElement.style.color = "white";
                                }
                            
                                // Pop-up'Ä± kapatmak iÃ§in bir zamanlayÄ±cÄ± kullan
                                setTimeout(() => {
                                    welcomePopup.remove();  // Pop-up'Ä± kapat
                                }, 1500);  
                            </script>

                        {{else}}
                            <a href="/login" class="button">Log In</a>
                            <a href="/register" class="button">Register</a>
                        {{end}}
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <div id="line"></div>
    <div id="gÃ¶rÃ¼nmezbar"></div>
    <div id="left">
         <!-- Yeni gÃ¶nderi oluÅŸturma baÄŸlantÄ±sÄ± -->
        <a id="centerolustur" href="{{if .LoggedIn}}/createPost{{else}}/login{{end}}">
            {{if .LoggedIn}}
                Create a new post
            {{else}}
                create a new post
            {{end}}
        </a>
        <!-- Kategori listesi -->
        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"> <img src="/static/png/database.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Veri TabanÄ±</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/coding.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Programlama</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/artificial-intelligence.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Yapay Zeka</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/ghost.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Oyun MotorlarÄ±</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/robot.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Robotik Sistemler</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"><img src="/static/png/structure.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±"> React Native</div>
        </div>

        <div id="leftkatagoricont">
            <div id="leftkatagoricontfoto"> <img src="/static/png/cyber-criminal.png" width="90%" height="50%"></div>
            <div id="leftkatagoricontyazÄ±">Cyber Security</div>
        </div>
    </div>
    <!-- Ana iÃ§erik alanÄ± -->
    <div id="center">
        <div id="filtrecont">
            <div id="filtre">En Yeni</div>
            <div id="filtre">Ã‡Ã¶zÃ¼lmÃ¼ÅŸ</div>
            <div id="filtre"></div>
            <div id="filtre"></div>
        </div>
         <!-- GÃ¶nderi listesi -->
        <div id="centercont">
            {{range .Posts}}
            <div class="post">
                <div id="centerprofilcont">
                    <div id="profil">
                        <img width="80%" height="100%" src="/static/png/pp.png">
                    </div>
                    <div id="name">
                       {{.Username}}
                    </div>
                
                </div>
                    <div id="centersorubaslik">
                        <ul><li> <h3><a href="/viewPost?id={{.ID}}">{{.Title}}</a></h3> </li></ul>
                             <ul><li> {{.CreatedAtFormatted}} &nbsp; {{.LikeCount}} Likes {{.DislikeCount}} Dislikes  </li></ul>

                    </div>
                    <div id="centersorukatagori">
                        <!-- GÃ¶nderi silme formu -->
                        <form id="deletePostForm" action="/deletePost" method="post">
                            <input type="hidden" name="post_id" value="{{.ID}}">
                            <button type="submit">
                                <img src="/static/png/delete.png" alt="Delete">
                            </button>
                        </form>
                        <p>Kategori</p>
                    </div>
            </div>
            {{end}}
       </div> 
    </div>

    <div id="mesajlasmaAlani">
        <div id="mesajlasmaBaslik">
            <h3>MesajlaÅŸma</h3>
            <input type="text" id="mesajlardaAra" placeholder="Mesajlarda ara...">
        </div>
        <div id="mesajListesi">
            <div class="mesaj ben">
                <img src="/static/png/pp.png" alt="Profil Resmi" class="profilResmi">
                <div class="mesajIcerik">Merhaba, nasÄ±lsÄ±n?</div>
                <div class="mesajTarihi">12:30</div>
            </div>
            <div class="mesaj diger">
                <img src="/static/png/pp2.png" alt="Profil Resmi" class="profilResmi">
                <div class="mesajIcerik">Ä°yiyim, sen nasÄ±lsÄ±n?</div>
                <div class="mesajTarihi">12:32</div>
            </div>
            </div>
        <div id="mesajGirisi">
            <textarea id="mesajMetni"></textarea>
            <button id="mesajGonder">GÃ¶nder</button>
        </div>
    </div>
    
    
    <!-- Harici script dosyalarÄ± -->
    <script src="/static/scripts.js"></script>
    <!-- Tema deÄŸiÅŸtirme script'i -->
    <script>
        let tema = localStorage.getItem("tema") || "light"; // EÄŸer tema daha Ã¶nce kaydedilmiÅŸse kullan, yoksa "light"
        
        // Sayfa yÃ¼klenirken temayÄ± ayarla
        document.body.classList.add(tema + "-mode"); // Varsa "light-mode" veya "dark-mode" ekle

        document.querySelector("#themeToggle").addEventListener("click", () => {
            tema = tema === "light" ? "dark" : "light";

            localStorage.setItem("tema", tema); // DeÄŸiÅŸen temayÄ± localStorage'a kaydet

            document.body.classList.remove("light-mode", "dark-mode"); // Ã–nceki sÄ±nÄ±flarÄ± temizle
            document.body.classList.add(tema + "-mode"); // Yeni tema sÄ±nÄ±fÄ±nÄ± ekle
        });
    </script>
    <!-- Ã‡Ä±kÄ±ÅŸ yapma onayÄ± script'i -->
    <script>
        // Ã‡Ä±kÄ±ÅŸ yap butonuna tÄ±klandÄ±ÄŸÄ±nda onay popup'Ä± gÃ¶ster
        document.querySelector('a[href="/logout"]').addEventListener('click', function(event) {
            event.preventDefault(); // BaÄŸlantÄ±nÄ±n varsayÄ±lan davranÄ±ÅŸÄ±nÄ± engelle (sayfayÄ± yenileme)
            
            // Onay popup'Ä±nÄ± gÃ¶ster
            if (confirm('Are you sure you want to log out?')) {
                // KullanÄ±cÄ± evet derse, logout sayfasÄ±na git
                window.location.href = this.getAttribute('href');
            } else {
                // KullanÄ±cÄ± hayÄ±r derse, popup'Ä± kapat
                // Ä°ÅŸlemi durdurmak iÃ§in gerekli deÄŸil, sadece bir geri bildirim olarak eklenir
            }
        });
    </script>
    <script>
        const mesajListesi = document.getElementById("mesajListesi");

function mesajEkle(mesaj, gonderen) {
    const mesajDiv = document.createElement("div");
    mesajDiv.classList.add("mesaj", gonderen === "ben" ? "ben" : "diger");

    const profilResmi = document.createElement("img");
    profilResmi.src = gonderen === "ben" ? "/static/png/pp.png" : "/static/png/pp2.png";
    profilResmi.alt = "Profil Resmi";
    profilResmi.classList.add("profilResmi");

    const mesajIcerik = document.createElement("div");
    mesajIcerik.classList.add("mesajIcerik");
    mesajIcerik.textContent = mesaj;

    const mesajTarihi = document.createElement("div");
    mesajTarihi.classList.add("mesajTarihi");
    mesajTarihi.textContent = "ÅŸimdi"; // Ã–rnek olarak "ÅŸimdi" yazÄ±ldÄ±

    mesajDiv.appendChild(profilResmi);
    mesajDiv.appendChild(mesajIcerik);
    mesajDiv.appendChild(mesajTarihi);

    mesajListesi.appendChild(mesajDiv);
    mesajListesi.scrollTop = mesajListesi.scrollHeight; // En alta scroll yap
}
// Ã–rnek mesajlar (rastgele ekleyebilirsiniz)
mesajEkle("Merhaba, nasÄ±lsÄ±n? aÅŸko", "ben");
mesajEkle("Ä°yiyim, sen nasÄ±lsÄ±n? bitanem", "diger");
mesajEkle("Ben de iyiyim, teÅŸekkÃ¼rler. ğŸ’…ğŸ»ğŸ’…ğŸ»ğŸ’…ğŸ»", "ben");

    </script>
    
</body>
</html>