<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/myprofil.css">
    <link rel="stylesheet" type="text/css" href="/static/css/bar.css">
    <title>Document</title>
</head>

<body>

    <!-- Ãœst Ã§ubuk -->
    <div id="bigbar">
        <div id="dÃ¼zenbar">
            <div id="bar">
                <!-- Logo -->
                <a href="index.html" id="logo"
                    style="background-image: url('/static/png/logo.png'); background-repeat: no-repeat; background-size: contain; width: 15%; height: 100%;"></a>

                <input type="text" id="searchBox" placeholder="search now" onkeyup="searchPosts()">
                <div id="darkmod">
                    <!-- Tema deÄŸiÅŸtirme dÃ¼ÄŸmesi -->
                    <span class="theme-mode">
                        <a role="button" id="themeToggle" title="Tema DeÄŸiÅŸtir" href="javascript:void(0);">ðŸŒ“
                            <i id="themeIcon" class="fas fa-sun"></i></a>
                    </span>
                </div>
                <div id="giriÅŸbar">
                    <nav>
                        <a href="/logout" id="logoutButton" class="button">Log Out</a>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <div id="gÃ¶rÃ¼nmezbar"></div>
    <!-- Profil container -->
    <div id="profileContainer">
        <!-- Profil Resmi -->
        <img id="profilePicture" src="/static/png/pp.png" alt="Liyan Profil FotoÄŸrafÄ±">
        <!-- SaÄŸ Profil Bilgileri KÄ±smÄ± -->
        <div id="profileRight">
            <!-- Profil AdÄ± -->
            <h2 id="profileName">{{ if .User.Username.Valid }}{{ .User.Username.String }}{{ else }}{{ "N/A" }}{{ end }}
            </h2>
            <!-- Profil Bilgileri -->
            <div id="profileInfo">
                <p><strong>Email:</strong> {{.User.Email}}</p>
            </div>
        </div>
    </div>
    <!-- Profil Ä°statistikleri -->
    <div id="postsContainer">
        <ul class="tabs">
            <li class="tab active" data-tab="ownPosts">Own Posts</li>
            <li class="tab" data-tab="likedPosts">Liked Posts</li>
        </ul>

        <div id="ownPosts" class="tab-content active">
            {{range .OwnPosts}}
            <div id="centercont">
                <li>{{.Title}} - {{.Content}}</li>
                <br><br>
                {{.CreatedAtFormatted}} &nbsp; {{.LikeCount}} Likes {{.DislikeCount}} Dislikes {{.CommentCount}} Comments
                <form id="deletePostForm" action="/deletePost" method="post">
                    <input type="hidden" name="post_id" value="{{.ID}}">
                    <button type="submit">
                        <img src="/static/png/delete.png" alt="Delete">
                    </button>
                </form>
            </div>
            {{else}}
            <p>HenÃ¼z hiÃ§bir post oluÅŸturmadÄ±nÄ±z.</p>
            {{end}}
        </div>

        <div id="likedPosts" class="tab-content">
            {{range .LikedPosts}}
            <div id="centercont">
                <li> {{.Title}} - {{.Content}}</li>
                <br><br>
                {{.CreatedAtFormatted}} &nbsp; {{.LikeCount}} Likes {{.DislikeCount}} Dislikes {{.CommentCount}} Comments
                <form id="deletePostForm" action="/deletePost" method="post">
                    <input type="hidden" name="post_id" value="{{.ID}}">
                    <button type="submit">
                        <img src="/static/png/delete.png" alt="Delete">
                    </button>
                </form>
            </div>
            {{else}}
            <p>HenÃ¼z hiÃ§bir gÃ¶nderiyi beÄŸenmediniz.</p>
            {{end}}
        </div>
    </div>

    <!-- JS betikleri, bunu Ã§Ä±karÄ±nca tema Ã§alÄ±ÅŸmÄ±yor -->
    <script src="/static/scripts.js"></script>
    <!-- Tema deÄŸiÅŸtirme betiÄŸi -->
    <script>
        // Sayfa yÃ¼klendiÄŸinde temayÄ± ayarla
        window.onload = function () {
            let tema = localStorage.getItem("tema") || "light"; // VarsayÄ±lan tema
            document.body.classList.add(tema + "-mode"); // Varsa "light-mode" veya "dark-mode" ekle
        };

        // Tema deÄŸiÅŸtirme dÃ¼ÄŸmesini dinle
        document.getElementById('themeToggle').addEventListener('click', function () {
            const currentTheme = document.body.classList.contains('light-mode') ? 'night-mode' : 'light-mode';
            changeTheme(currentTheme);
        });

        // GiriÅŸ sayfasÄ±na yÃ¶nlendirme fonksiyonu
        function closeLogin() {
            window.location.href = 'index.html';
        }

        // Tab deÄŸiÅŸimlerini dinle
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;

                // Aktif sekmenin sÄ±nÄ±fÄ±nÄ± gÃ¼ncelle
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // Aktif sekmenin iÃ§eriÄŸini gÃ¶ster
                tabContents.forEach(content => {
                    if (content.id === tabId) {
                        content.classList.add('active');
                        console.log(tabId +
                            " iÃ§eriÄŸi gÃ¶steriliyor."
                        ); // TÄ±klanan sekmenin ID'sini konsola yazdÄ±rÄ±n
                    } else {
                        content.classList.remove('active');
                        console.log(content.id +
                            " iÃ§eriÄŸi gizleniyor."
                        ); // TÄ±klanan sekmenin ID'sini konsola yazdÄ±rÄ±n
                    }
                });
            });
        });

        // Liked Posts sekmesi dinleyicisi
        document.querySelector('[data-tab="likedPosts"]').addEventListener('click', function () {
            const tabId = this.getAttribute('data-tab');

            // Aktif sekmenin sÄ±nÄ±fÄ±nÄ± gÃ¼ncelle
            document.querySelector('.tab.active').classList.remove('active');
            this.classList.add('active');

            // Aktif sekmenin iÃ§eriÄŸini gÃ¶ster
            document.querySelector('.tab-content.active').classList.remove('active');
            document.getElementById(tabId).classList.add('active');
        });
    </script>
</body>

</html>
